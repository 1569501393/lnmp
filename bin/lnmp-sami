#!/usr/bin/env bash

#
# https://github.com/FriendsOfPHP/Sami
#

set -e

ScriptRoot="$( cd "$( dirname "$0"  )" && pwd  )"

source $ScriptRoot/.arch

docker run -i ${tty} --rm \
  --mount type=bind,src=$PWD,target=/app,consistency=delegated \
  --mount src=lnmp_composer_cache-data,target=/tmp/cache \
  --entrypoint sami \
  --user ${LNMP_USER:-root:root} \
  -e TZ=${TZ} \
  ${DOCKER_IMAGE}:${TAG} \
  "$@"
